{"version":3,"sources":["webpack:///src/pages/order/Auth.vue","webpack:///./src/pages/order/Auth.vue?36a6","webpack:///./src/pages/order/Auth.vue","webpack:///./static/image/loading.gif"],"names":["Auth","data","type","openid","orderId","state","mounted","this","getUrlParam","recharge","getCode","methods","code","getOpenId","_this2","scope","$api","res","console","log","status","toPayHandler","GLOBAL","errorToShow","msg","checkWXJSBridge","that","interval","setInterval","window","WeixinJSBridge","clearTimeout","onBridgeReady","_this","invoke","appId","appid","timeStamp","nonceStr","package","signType","paySign","err_msg","successToShow","setTimeout","$router","replace","path","query","order_id","_this3","payment_code","payment_type","uid","trade_type","money","pay","_data","name","url","location","href","reg","RegExp","r","substr","match","order_Auth","render","$createElement","_self","_c","_m","staticRenderFns","_h","staticClass","attrs","src","__webpack_require__","_v","Component","normalizeComponent","ssrContext","__webpack_exports__","module","exports"],"mappings":"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","file":"static/js/19.b91d08c447125f1dabad.js","sourcesContent":["<template>\r\n  <div class=\"author-body\">\r\n    <div class=\"author-c\">\r\n      <img src=\"../../../static/image/loading.gif\" class=\"loading-img\" />\r\n      <p>信息加载中,请稍后...</p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      type: '',\r\n      openid: '',\r\n      orderId: '',\r\n      state: ''\r\n    }\r\n  },\r\n  mounted() {\r\n    // 获取url上的参数\r\n    this.orderId = this.getUrlParam('order_id')\r\n    this.recharge = this.getUrlParam('recharge')\r\n    this.type = this.getUrlParam('type')\r\n    this.state = this.getUrlParam('state')\r\n    this.getCode()\r\n  },\r\n  methods: {\r\n    getCode() {\r\n      var code = this.getUrlParam('code')\r\n      code && this.getOpenId(code)\r\n    },\r\n    getOpenId(code) {\r\n      let data = {\r\n        code: code,\r\n        scope: 2,\r\n        state: this.state\r\n      }\r\n      //模拟接口\r\n      this.$api.getOpenId(data, res => {\r\n        console.log(res)\r\n        if (res.status) {\r\n          this.openid = res.data.openid\r\n          this.toPayHandler('wechatpay')\r\n        } else {\r\n          this.GLOBAL.errorToShow(res.msg)\r\n        }\r\n      })\r\n    },\r\n    checkWXJSBridge(data) {\r\n      let that = this\r\n      let interval = setInterval(() => {\r\n        if (typeof window.WeixinJSBridge != 'undefined') {\r\n          clearTimeout(interval)\r\n          that.onBridgeReady(data)\r\n        }\r\n      }, 200)\r\n    },\r\n    onBridgeReady(data) {\r\n      var _this = this\r\n      window.WeixinJSBridge.invoke(\r\n        'getBrandWCPayRequest',\r\n        {\r\n          appId: data.appid, // 公众号名称，由商户传入\r\n          timeStamp: data.timeStamp, // 时间戳，自1970年以来的秒数\r\n          nonceStr: data.nonceStr, // 随机串\r\n          package: data.package,\r\n          signType: data.signType, // 微信签名方式：\r\n          paySign: data.paySign // 微信签名\r\n        },\r\n        function(res) {\r\n          if (res.err_msg === 'get_brand_wcpay_request:ok') {\r\n            _this.GLOBAL.successToShow('支付成功')\r\n          } else if (res.err_msg === 'get_brand_wcpay_request:cancel') {\r\n            _this.GLOBAL.errorToShow('取消支付')\r\n          } else {\r\n            _this.GLOBAL.errorToShow('支付失败')\r\n          }\r\n          setTimeout(() => {\r\n            _this.$router.replace({\r\n              path: '/payresult',\r\n              query: { order_id: _this.orderId }\r\n            })\r\n          }, 1000)\r\n        }\r\n      )\r\n    },\r\n    toPayHandler(code) {\r\n      let data = {\r\n        payment_code: code,\r\n        payment_type: this.type\r\n      }\r\n      data['ids'] = this.type == 1 ? this.orderId : this.uid\r\n      console.log(data)\r\n      if (this.type == 1 && this.orderId) {\r\n        // 微信jsapi支付\r\n        if (this.openid) {\r\n          data['params'] = {\r\n            trade_type: 'JSAPI_OFFICIAL',\r\n            openid: this.openid\r\n          }\r\n        }\r\n      } else if (this.type == 2 && this.recharge) {\r\n        if (this.openid) {\r\n          data['params'] = {\r\n            money: this.recharge,\r\n            openid: this.openid\r\n          }\r\n        }\r\n      }\r\n      this.$api.pay(data, res => {\r\n        if (res.status) {\r\n          const data = res.data\r\n          this.checkWXJSBridge(data)\r\n        } else {\r\n          this.GLOBAL.errorToShow(res.msg)\r\n        }\r\n      })\r\n    },\r\n    getUrlParam(name, url) {\r\n      var url = url || window.location.href\r\n      var reg = new RegExp('(^|&|/?)' + name + '=([^&|/?]*)(&|/?|$)', 'i')\r\n      var r = url.substr(1).match(reg)\r\n      if (r != null) {\r\n        return r[2]\r\n      }\r\n      return null\r\n    },\r\n  }\r\n}\r\n</script>\r\n<style>\r\n.author-body {\r\n  position: relative;\r\n  height: 100%;\r\n}\r\n.author-c {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  color: #666;\r\n  transform: translate(-50%, -50%);\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/order/Auth.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"author-body\"},[_c('div',{staticClass:\"author-c\"},[_c('img',{staticClass:\"loading-img\",attrs:{\"src\":require(\"../../../static/image/loading.gif\")}}),_vm._v(\" \"),_c('p',[_vm._v(\"信息加载中,请稍后...\")])])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-478ab231\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/order/Auth.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-478ab231\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./Auth.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Auth.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Auth.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-478ab231\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./Auth.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/order/Auth.vue\n// module id = null\n// module chunks = ","module.exports = \"data:image/gif;base64,R0lGODlhUABQALMJAP/////MzP/Mmf+Zmf+ZZv9mZv9mM/8zM8zMzP///wAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo2ZTcyOGEwMi0yNzE0LWM3NDUtYjhiNy05YjQ5ZmM5MTIzMWEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDVDM0M2OUJFMEFBMTFFOEIyQzlDNUU1MkVENDY2QkIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDVDM0M2OUFFMEFBMTFFOEIyQzlDNUU1MkVENDY2QkIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjZlNzI4YTAyLTI3MTQtYzc0NS1iOGI3LTliNDlmYzkxMjMxYSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2ZTcyOGEwMi0yNzE0LWM3NDUtYjhiNy05YjQ5ZmM5MTIzMWEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4B//79/Pv6+fj39vX08/Lx8O/u7ezr6uno5+bl5OPi4eDf3t3c29rZ2NfW1dTT0tHQz87NzMvKycjHxsXEw8LBwL++vby7urm4t7a1tLOysbCvrq2sq6qpqKempaSjoqGgn56dnJuamZiXlpWUk5KRkI+OjYyLiomIh4aFhIOCgYB/fn18e3p5eHd2dXRzcnFwb25tbGtqaWhnZmVkY2JhYF9eXVxbWllYV1ZVVFNSUVBPTk1MS0pJSEdGRURDQkFAPz49PDs6OTg3NjU0MzIxMC8uLSwrKikoJyYlJCMiISAfHh0cGxoZGBcWFRQTEhEQDw4NDAsKCQgHBgUEAwIBAAAh+QQFFAAJACwAAAAAUABQAAAE/zDJSau9OOvNu/9gKI5kaZ5oqq5s675wLM90bd94ru987//AoHBILBqPyKRyyWw6n1AUYIqoWhFTQIWKtWanP+51XAVPAORrlodOu82Sthurzcnn6Xr8nsfx6V9iahSBf1g2f3CEiRhZZHoxgooXgoeNfJMud5mUmBqekZsWa1ugjWqQLaJbXqOmroMwq2djqQmVtrStsrG6u6W1p7+aXqmvi8GwVpHFo8PKz3FXzGW5a6SUyYTTvNHbZZfNyMvd4OHet222s8Ti2b2u7+Yvkhm4IPXU6OnaHJu5K+7ZqwXw276Ajwpi4sQPVY1EgVgRLATxhqFqii46emMHDx2DHjXd+bk4rNIchohMVltEElsYii73wCwYpabNmzhz6tzJs6fPn0CDCh1KtKjRo0iTKl3KtGnRCAAh+QQFDQAJACwXADMAIgADAAAEI3CUcqqtJaSdgrygVQybN50nyZWSEU6DtnZBbcszLQx8jCcRACH5BAUKAAkALBMAMAApAAYAAARGMJRDTxkhpA32lpWFeR8YDolZFeyFkirFDjRrhJYn3ThlEKTUpEcUBTWJQ5D08kyW0GhqUNgYrtdckJpcKqVHMLTWQiFJEQAh+QQFCgAJACwQACsALwALAAAEdDCUQ0e6GANJTwlZtoUYR4FD95HZMFErKycpDJoeOLuqPmc4y6Vmm21eHuEvgYsxkblfUynjdag0QybJZKVChYFvSHJisIkDpmAeaLcJduGiDo1JdXx7GYr+Cm8sgXwhBnOEcXQdFD+DYIheA5KSS4cXYT8RACH5BAUKAAkALBAAKAAvAA4AAASEcJw5kr032DA0xkMxHcVnDcZUSKr5BWLhuWFrsmQwyu6F870Q8COiJA6XUi8huRgqyxkIeUooj9AlFbvsXQ2nbfeyPWTHzO31ik6T224LuHu+lYcmjZhtEVuUAVIJBB9bHhp8XX5HiiZzfXBVkXKTcItvIJaVCY8vH4SXnEybox91pBcRACH5BAUKAAkALBAAJQAvABEAAASYcJxZkr2hzFPC/cmgUR54jccgTYOZoJVriVsnrxyxtSCQFTbZDBYAmAYGSuwl85QKPJfmU/pMLctEVTgTXrWmbDTFXRqiYeEWygVlD1y0t5220oVkkKGdZd79IFsJBgJlbn8feSFwF4xziIAyfYMhknctex+Zhy4GnnUgB5mbmlykJqc6kKuWpX+CNxaOrhiTiay4IhanQhEAIfkEBQoACQAsEAAlAC8AEQAABHOwpJkCneNQfW/hWEdZVCFN50WOIkWAxtAmKV22QmLM3UfFLV9r1ZEljLzOLgnSJY+75vNpqE03T+l16+HyAkuv+Fk7IMdo5+acFlnJ7bj8FFhJtcwDfnYwGPBmMy9MZ29Uci17cmEdeIyIITQmNlR9KEkRACH5BAURAAkALBAAIQAvABUAAASIMAVzakk46z1KPUWwbYFnicnwhaPUpiaIvuU3SKYxAGThz5rOCjhSnQLD3uolPL1wtidTmjlQrxpDRvu8VLFc6c16w2Ks1EM4bL6ize8n2ktlt+JtDP2la9mzeYF6VHuCV3+GiRuIioKFI0RSfY0jeGZllJQVjplpmC2fnYqWUqSddI8ZRGpXEQAh+QQFCgAJACwQABoALwAcAAAE8DDJmUAQJes8Ap3DxnXeZ05BeKxsexQlWrhs0Z1fMNO8ccu8lQ0n0blEBcMxlkhtaLCTsTYgBa6hnZDZvDqXOe2LS5luid8ac9D6ERMD5RktHoAO5Tdlpice7AkFeh5kgXh9EmwTggmHLyZ2eIAffCBvjI1wiCgnlYlvBpuio6SlpqeolIupJ6GirqCffZg4sKWTOFEmtKqiuJu/ALS/rLuQFAaFxcYStAYCyx+/xBQDAKK6p8SCygQnNwDXHry8srsZxyYGG53KIZdrtrPKRQnyyLg6iKHXfePlgfpJABDiXrMmpbBUWVjIgh121CZEAAAh+QQFFwAJACwQACUALwARAAAEcjDJSasMNpfM+9wSyBGU4X1nIiQmlk7mKUoA57pvMmvUbgUbX85SGAxLshwuZYR5lp3mUCqhHllQ3clq9XQTtV6Wwr1iJ8De9vqtxMi08MQqCtfavIrQqVcPx0lmXntagkVTIQaKih6EeCkBkZJrc4ASEQAh+QQFFAAJACwQACEALwAVAAAEvjAFk2oCNus6yv5fEXCghWFbV26BRyauMbCw9KnWWM6Vp68ZlAZX+YUyvIqw6KqBiLbPcpBMmjTLYVP0zBAs1pwTSOSmKK9E+IoaGLXBMzgOLO6aWXXmZ+723kglU2Nre1uAdBotYkl9IId1QxYui5E9k4gglXppkZtNQJ+hK58DeVegYZswbhcfq2oBWYCmNBpNVEuwHlQ8aIkfvxoGBLqWPbWCl5pwx3UAATwF09Rr0QnCy85XzgECva2nFREAOw==\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./static/image/loading.gif\n// module id = w1N2\n// module chunks = 17 19"],"sourceRoot":""}